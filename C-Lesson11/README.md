# Урок по C №11. Динамическое управление памятью

## Средства динамического управления памятью
Память под автоматические переменные (см. урок 3) выделяется и освобождается автоматически.
С одной стороны, это хорошо, т.к. позволяет избежать утечек памяти, с другой стороны, часто возникает
необходимость самостоятельно контролировать время жизни переменных. Также динамическое выделение памяти
необходимо, когда заранее неизвестен размер необходимой памяти.

У динамического выделения памяти два неодостатка:
- память необходимо вручную очищать;
- динамическое выделение памяти - относительно длительная операция.

Для динамического выделения памяти используются функции `malloc()` и `calloc()`. Для освобождения выделенной этими функциями памяти используется функция `free()`. Еще одна полезная функция - `realloc()`, которая позволяет изменить размер ранее выделенной области памяти.

## Функция `malloc()`
Функция `malloc()` (memory allocation) объявлена в библиотеке `stdlib.h` и имеет следующий вид:
```c
void* malloc(size_t size);
```
Она принимает размер выделяемого блока памяти в байтах и возвращает нетипизированный указатель на выделенный блок. Далее нетипизированный указатель необходимо явно привести к нужному типу. 

Если память выделить не удалось, то возврается `NULL`.

## Функция `calloc()`
Функция выделяет n объектов размером m байт и заполняет их нулями:
```c
void* calloc(size_t num, size_t size);
```
Обычно эта функция используется для выделения памяти под массивы.

Также как функция `malloc()`, функция `calloc()` возвращает нетипизированный указатель на выделенную область памяти, который надо явно приводить к нужному типу.

Если память выделить не удалось, то возвращается `NULL`.

## Функция `realloc()`
Функция `realloc()` позволяет изменить размер ранее выделенной памяти и получает в качестве аргументов старый указатель и новый размер памяти в байтах:
```c
void* realloc(void* ptr, size_t size);
```

Полведение функций `malloc()`, `calloc()` и `realloc()` с нулевым размером выделяемой памяти не определено. Так, например, вызов `realloc(NULL, size_t)` эквивалентен вызову `malloc(size_t)`, однако вызов `realloc(NULL, 0)` не эквивалентен выызову `malloc(0)`.

## Функция `free()`
Функция освобождает память, ранее выделенную функциями `malloc()`, `calloc()` и `realloc()`. Это единственная функция управления памятью, которая не возвращает никаких значений.